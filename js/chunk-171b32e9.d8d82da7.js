(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-171b32e9"],{"0798":function(e,t,r){"use strict";var a=r("5530"),o=r("ade3"),s=(r("caad"),r("0c18"),r("10d2")),n=r("afdd"),i=r("9d26"),l=r("f2e7"),c=r("7560"),d=r("2b0e"),u=d["a"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),h=r("58df"),m=r("d9bd");t["a"]=Object(h["a"])(s["a"],l["a"],u).extend({name:"v-alert",props:{border:{type:String,validator:function(e){return["top","right","bottom","left"].includes(e)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(e){return"string"===typeof e||!1===e}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(e){return["info","error","success","warning"].includes(e)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var e={staticClass:"v-alert__border",class:Object(o["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible:function(){var e=this;if(!this.dismissible)return null;var t=this.iconColor;return this.$createElement(n["a"],{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return e.isActive=!1}}},[this.$createElement(i["a"],{props:{color:t}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(i["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var e=Object(a["a"])(Object(a["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(e["v-alert--border-".concat(this.border)]=!0),e},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||c["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(m["a"])("outline","outlined",this)},methods:{genWrapper:function(){var e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],t={staticClass:"v-alert__wrapper"};return this.$createElement("div",t,e)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var t=this.hasText?this.setTextColor:this.setBackgroundColor;e=t(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(e){var t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}})},"0c18":function(e,t,r){},"97a7":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("Breadcrumbs",{attrs:{title:"Cold Storage (CSM)",icon:"mdi-nas",items:e.breadcrumbsItems}}),r("DashboardTitle"),r("v-row",[r("v-col",{attrs:{cols:"8"}},[r("ColdStorageStateTable",{ref:"csstable"})],1),r("v-col",{attrs:{cols:"4"}},[r("ColdStorageForm",{on:{created:e.updateStorage}})],1)],1)],1)},o=[],s=r("a6a3"),n=r("bfc7"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var a=t.invalid;return[r("v-card-title",[e._v(" Add new Cold Storage ")]),r("v-card-text",[r("v-alert",{attrs:{border:"left",type:e.alert.type,color:e.alert.color,dismissible:""},model:{value:e.alert.isOpen,callback:function(t){e.$set(e.alert,"isOpen",t)},expression:"alert.isOpen"}},[e._v(" "+e._s(e.alert.message)+" ")]),r("validation-provider",{attrs:{name:"Cold Storage Identifier",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors;return[r("v-text-field",{attrs:{label:"Cold Storage Identifier",disabled:e.isSaving,"error-messages":a},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]}}],null,!0)})],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"success",disabled:a||e.isSaving,loading:e.isSaving},on:{click:e.save}},[e._v(" Save ")])],1)]}}])})],1)},l=[],c=r("1da1"),d=(r("96cf"),r("b0c0"),r("7bb1")),u=r("bc3a"),h=r.n(u),m={name:"CsmColdStorageForm",components:{ValidationProvider:d["b"],ValidationObserver:d["a"]},data:function(){return{alert:{isOpen:!1,type:"success",message:"Outgoing vaccine log saved",color:"success"},form:{name:""},isSaving:!1}},mounted:function(){this.fetchStorageUnits(),this.fetchTeams()},methods:{save:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSaving=!0,r="http://172.1.1.2:3000",a=localStorage.getItem("dms-token"),o={headers:{Authorization:"Bearer ".concat(a)}},t.prev=4,t.next=7,h.a.post("".concat(r,"/storage-units"),e.form,o);case 7:e.successAlert(),e.form.name="",e.$refs.observer.reset(),e.$emit("created"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),401===(null===t.t0||void 0===t.t0||null===(s=t.t0.response)||void 0===s?void 0:s.status)?(localStorage.removeItem("dms-token"),e.$router.push("/csm/login").catch()):400===t.t0.response.status?(e.alert.type="error",e.alert.color="error",e.alert.message=t.t0.response.data.message,e.alert.isOpen=!0):e.somethingWentWrongAlert();case 16:e.isSaving=!1;case 17:case"end":return t.stop()}}),t,null,[[4,13]])})))()},somethingWentWrongAlert:function(){this.alert.type="warning",this.alert.message="Something went wrong. Please contact your IT admin.",this.alert.isOpen=!0},successAlert:function(){this.alert.type="success",this.alert.message="Form successfully submitted",this.alert.isOpen=!0}}},v=m,p=r("2877"),g=r("6544"),f=r.n(g),b=r("0798"),S=r("8336"),C=r("b0af"),x=r("99d9"),_=r("2fa4"),y=r("8654"),w=Object(p["a"])(v,i,l,!1,null,null,null),k=w.exports;f()(w,{VAlert:b["a"],VBtn:S["a"],VCard:C["a"],VCardActions:x["a"],VCardText:x["c"],VCardTitle:x["d"],VSpacer:_["a"],VTextField:y["a"]});var $=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mx-auto"},[r("v-card-title",[r("v-row",[r("v-col",{attrs:{cols:"9"}},[e._v(" Vaccines in Cold Storage ")]),r("v-col",{attrs:{cols:"3"}},[r("v-select",{attrs:{label:"Cold Storage filter","item-value":"id","item-text":"name",items:e.storages},on:{input:e.storageFilterUpdate},model:{value:e.storageFilter,callback:function(t){e.storageFilter=t},expression:"storageFilter"}})],1)],1)],1),r("v-card-text",[r("v-data-table",{attrs:{headers:e.headers,items:e.filteredItems,loading:e.isLoadingItems,search:e.search,"item-key":"id"},scopedSlots:e._u([{key:"item.expiration",fn:function(t){var r=t.item;return[e._v(" "+e._s(e.formatDate(r.expiration))+" ")]}}])})],1)],1)},B=[],I=(r("99af"),r("b166")),O={name:"CsmColdStorageStateTable",data:function(){return{headers:[{text:"Manufacturer",value:"manufacturer",sortable:!1,filterable:!1},{text:"Serial",value:"serial",sortable:!1},{text:"Lot number",value:"lot_no",sortable:!1},{text:"Expiration",value:"expiration",sortable:!1},{text:"Amount",value:"amount",filterable:!1}],alert:{isOpen:!1,type:"warning",message:"Something went wrong. Please contact your IT.",color:"warning"},items:[],storages:[],isLoadingItems:!1,storageFilter:void 0}},computed:{filteredItems:function(){return this.items}},mounted:function(){this.fetchStorageUnits()},methods:{fetchStorageUnits:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,o,s,n,i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="http://172.1.1.2:3000",a=localStorage.getItem("dms-token"),o={headers:{Authorization:"Bearer ".concat(a)}},t.prev=3,t.next=6,h.a.get("".concat(r,"/storage-units"),o);case 6:n=t.sent,i=n.data,e.storages=i,e.storageFilter=null===(s=i[0])||void 0===s?void 0:s.id,e.storageFilterUpdate(),t.next=20;break;case 13:if(t.prev=13,t.t0=t["catch"](3),401!==(null===t.t0||void 0===t.t0||null===(l=t.t0.response)||void 0===l?void 0:l.status)){t.next=19;break}return localStorage.removeItem("dms-token"),e.$router.push("/csm/login").catch(),t.abrupt("return");case 19:e.somethingWentWrongAlert();case 20:case"end":return t.stop()}}),t,null,[[3,13]])})))()},storageFilterUpdate:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,o,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.storageFilter){t.next=2;break}return t.abrupt("return");case 2:return r="http://172.1.1.2:3000",a=localStorage.getItem("dms-token"),o={headers:{Authorization:"Bearer ".concat(a)}},t.prev=5,t.next=8,h.a.get("".concat(r,"/vaccine-logs/storage-units/").concat(e.storageFilter),o);case 8:s=t.sent,n=s.data,e.items=n,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](5),401===(null===t.t0||void 0===t.t0||null===(i=t.t0.response)||void 0===i?void 0:i.status)&&(localStorage.removeItem("dms-token"),e.$router.push("/csm/login").catch()),e.somethingWentWrongAlert();case 17:case"end":return t.stop()}}),t,null,[[5,13]])})))()},formatDate:function(e){return Object(I["a"])(new Date(e),"MMM dd, yyyy")}}},V=O,A=r("62ad"),T=r("8fea"),F=r("0fd9"),j=r("b974"),E=Object(p["a"])(V,$,B,!1,null,null,null),D=E.exports;f()(E,{VCard:C["a"],VCardText:x["c"],VCardTitle:x["d"],VCol:A["a"],VDataTable:T["a"],VRow:F["a"],VSelect:j["a"]});var W={name:"CsmColdStorage",components:{DashboardTitle:n["a"],Breadcrumbs:s["a"],ColdStorageStateTable:D,ColdStorageForm:k},data:function(){return{breadcrumbsItems:[{text:"Home",disabled:!1},{text:"Cold Storage",disabled:!1}]}},methods:{updateStorage:function(){this.$refs.csstable.fetchStorageUnits()}}},R=W,U=r("a523"),L=Object(p["a"])(R,a,o,!1,null,null,null);t["default"]=L.exports;f()(L,{VCol:A["a"],VContainer:U["a"],VRow:F["a"]})}}]);
//# sourceMappingURL=chunk-171b32e9.d8d82da7.js.map