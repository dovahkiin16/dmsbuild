{"version":3,"sources":["webpack:///./src/views/csm/InventoryLogs.vue?3ee4","webpack:///./src/components/csm/VaccineLogsTable.vue?9803","webpack:///src/components/csm/VaccineLogsTable.vue","webpack:///./src/components/csm/VaccineLogsTable.vue?171a","webpack:///./src/components/csm/VaccineLogsTable.vue","webpack:///src/views/csm/InventoryLogs.vue","webpack:///./src/views/csm/InventoryLogs.vue?4a46","webpack:///./src/views/csm/InventoryLogs.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","breadcrumbsItems","staticRenderFns","staticClass","_v","storages","model","value","callback","$$v","storageFilter","expression","mfrs","mfrFilter","search","headers","filteredItems","isLoadingItems","scopedSlots","_u","key","fn","ref","item","_s","transaction_type","formatDate","created_at","name","data","text","filterable","created","fetchVaccineLogs","fetchStorageUnits","computed","items","forEach","list","includes","manufacturer","push","console","log","filtered","methods","component","VCard","VCardTitle","VCol","VDataTable","VRow","VSelect","VSpacer","VTextField","components","DashboardTitle","Breadcrumbs","VaccineLogsTable","disabled","VContainer"],"mappings":"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","file":"js/chunk-2d0cc462.e2caffcb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('Breadcrumbs',{attrs:{\"title\":\"Vaccine Inventory Logs (CSM)\",\"icon\":\"mdi-post\",\"items\":_vm.breadcrumbsItems}}),_c('DashboardTitle'),_c('VaccineLogsTable')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"mx-auto\"},[_c('v-card-title',[_c('v-row',[_c('v-col',[_vm._v(\" Vaccine inventory logs \")]),_c('v-spacer'),_c('v-col',[_c('v-select',{attrs:{\"label\":\"Storage filter\",\"items\":_vm.storages},model:{value:(_vm.storageFilter),callback:function ($$v) {_vm.storageFilter=$$v},expression:\"storageFilter\"}})],1),_c('v-col',[_c('v-select',{attrs:{\"label\":\"Manufacturer filter\",\"items\":_vm.mfrs},model:{value:(_vm.mfrFilter),callback:function ($$v) {_vm.mfrFilter=$$v},expression:\"mfrFilter\"}})],1),_c('v-col',{staticClass:\"ml-2\"},[_c('v-text-field',{attrs:{\"append-icon\":\"mdi-magnify\",\"label\":\"Search (Serial/Lot)\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)],1)],1),_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.filteredItems,\"loading\":_vm.isLoadingItems,\"search\":_vm.search,\"item-key\":\"id\"},scopedSlots:_vm._u([{key:\"item.transaction_type\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(item.transaction_type === 'incoming' ? 'Incoming' : 'Outgoing')+\" \")]}},{key:\"item.created_at\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(_vm.formatDate(item.created_at))+\" \")]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card class=\"mx-auto\">\n    <v-card-title>\n      <v-row>\n        <v-col>\n          Vaccine inventory logs\n        </v-col>\n        <v-spacer />\n\n        <v-col>\n          <v-select\n            label=\"Storage filter\"\n            v-model=\"storageFilter\"\n            :items=\"storages\"\n          />\n        </v-col>\n\n        <v-col>\n          <v-select\n            label=\"Manufacturer filter\"\n            v-model=\"mfrFilter\"\n            :items=\"mfrs\"\n          />\n        </v-col>\n        <v-col class=\"ml-2\">\n          <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"Search (Serial/Lot)\"\n          single-line\n          hide-details\n        ></v-text-field>\n        </v-col>\n      </v-row>\n      \n    </v-card-title>\n\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"filteredItems\"\n      :loading=\"isLoadingItems\"\n      :search=\"search\"\n      item-key=\"id\"\n    >\n      <template v-slot:item.transaction_type=\"{item}\">\n        {{item.transaction_type === 'incoming' ? 'Incoming' : 'Outgoing'}}\n      </template>\n      <template v-slot:item.created_at=\"{item}\">\n        {{formatDate(item.created_at)}}\n      </template>\n    </v-data-table>\n  </v-card>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { format } from 'date-fns'\n\nexport default {\n  name: 'CsmVaccineLogsTable',\n  data: () => ({\n    headers: [\n      {\n        text: 'Transaction',\n        value: 'transaction_type',\n        filterable: false\n      },\n      {\n        text: 'Amount',\n        value: 'amount',\n        filterable: false\n      },\n      { text: 'Manufacturer', value: 'manufacturer', filterable: false },\n      { text: 'Storage', value: 'storage_unit_name', filterable: false},\n      { text: 'Serial', value: 'serial' },\n      { text: 'Lot number', value: 'lot_no' },\n      { text: 'Notes', value: 'comments', filterable: true },\n      { text: 'Timestamp', value: 'created_at', filterable: false },\n    ],\n    alert: {\n      isOpen: false,\n      type: 'warning',\n      message: 'Something went wrong. Please contact your IT.',\n      color: 'warning',\n    },\n    items: [],\n    storages: [],\n    isLoadingItems: false,\n    search: '',\n    mfrFilter: 'All',\n    storageFilter: 'Any'\n  }),\n\n  created () {\n    this.fetchVaccineLogs()\n    this.fetchStorageUnits()\n  },\n\n  computed: {\n    mfrs () {\n      const list = []\n\n      this.items.forEach (item => {\n        if (!list.includes(item.manufacturer)) list.push(item.manufacturer)\n      })\n\n      console.log(this.items)\n\n      return ['All', ...list]\n    },\n\n    filteredItems () {\n      let filtered = this.items\n      if (this.mfrFilter !== 'All')\n        filtered = filtered.filter(item => item.manufacturer === this.mfrFilter)\n      if (this.storageFilter !== 'Any')\n        filtered = filtered.filter(item => item.storage_unit_name === this.storageFilter)\n      \n      return filtered\n    }\n  },\n\n  methods: {\n    async fetchStorageUnits () {\n      const apiHost = process.env.VUE_APP_API_HOST\n\n      const token = localStorage.getItem('dms-token')\n      const config = {\n        headers: { Authorization: `Bearer ${token}` }\n      }\n\n      try {\n        const {data} = await axios.get(`${apiHost}/storage-units`, config)\n        const storageNames = data.map(v => v.name)\n        this.storages = ['Any', ...storageNames]\n      } catch (error) {\n        if (error?.response?.status === 401) {\n          localStorage.removeItem('dms-token')\n          this.$router.push('/csm/login')\n        }\n\n        this.alert.isOpen = true\n      }\n    },\n\n    async fetchVaccineLogs () {\n      this.isLoadingItems = true\n\n      const apiHost = process.env.VUE_APP_API_HOST\n\n      const token = localStorage.getItem('dms-token')\n      const config = {\n        headers: { Authorization: `Bearer ${token}` }\n      }\n\n      try {\n        const {data} = await axios.get(`${apiHost}/vaccine-logs`, config)\n        this.items = data\n\n        this.isLoadingItems = false\n      } catch (error) {\n        if (error?.response?.status === 401) {\n          localStorage.removeItem('dms-token')\n          this.$router.push('/csm/login')\n        }\n\n        this.alert.isOpen = true\n      }\n    },\n\n    formatDate(date) {\n      return format(new Date(date), 'PPpp')\n    },\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VaccineLogsTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VaccineLogsTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VaccineLogsTable.vue?vue&type=template&id=3e1b2a1c&\"\nimport script from \"./VaccineLogsTable.vue?vue&type=script&lang=js&\"\nexport * from \"./VaccineLogsTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCard,VCardTitle,VCol,VDataTable,VRow,VSelect,VSpacer,VTextField})\n","<template>\n  <v-container>\n    <Breadcrumbs \n      title=\"Vaccine Inventory Logs (CSM)\"\n      icon=\"mdi-post\"\n      :items=\"breadcrumbsItems\"\n    />\n    <DashboardTitle />\n\n    <VaccineLogsTable />\n  </v-container>\n</template>\n\n<script>\nimport Breadcrumbs from '../../components/admin/Breadcrumbs.vue'\nimport DashboardTitle from '../../components/admin/DashboardTitle.vue'\nimport VaccineLogsTable from '../../components/csm/VaccineLogsTable.vue'\n\nexport default {\n  name: 'CsmInventoryLogs',\n  components: { \n    DashboardTitle,\n    Breadcrumbs,\n    VaccineLogsTable,\n  },\n  data: () => ({\n    breadcrumbsItems: [\n      {\n        text: 'Home',\n        disabled: false,\n      },\n      {\n        text: 'Vaccine Inventory Logs',\n        disabled: false,\n      },\n    ],\n  })\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InventoryLogs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InventoryLogs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InventoryLogs.vue?vue&type=template&id=1cae4bdc&\"\nimport script from \"./InventoryLogs.vue?vue&type=script&lang=js&\"\nexport * from \"./InventoryLogs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VContainer})\n"],"sourceRoot":""}